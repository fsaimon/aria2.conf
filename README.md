# aria2.conf
æœ¬é¡¹ç›®æä¾›ä¸€ä¸ªä¸é”™çš„ aria2 é…ç½®æ–‡ä»¶ï¼ŒåŒæ—¶æä¾› MacOS ä¸‹çš„å¼€æœºå¯åŠ¨å¹¶å¯æ§çš„è§£å†³æ–¹æ¡ˆ

### conf æ³¨æ„äº‹é¡¹
ä½¿ç”¨è¯·å°†é…ç½®æ–‡ä»¶ä¸­ä¸‰å¤„æ–‡ä»¶è·¯å¾„ä¿®æ”¹ä¸ºè‡ªå·±çš„è·¯å¾„

å°† aria2.conf æ”¾åœ¨ ~/.aria2/ ä¸‹

ä½¿ç”¨ aria2 å‘½ä»¤æ—¶ï¼Œaria2 ä¼šè‡ªåŠ¨åŠ è½½ ~/.aria2/aria2.conf

é…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰å¯ç”¨ input-file é€‰é¡¹ï¼Œç†ç”±åœ¨æ–‡ä»¶ä¸­æœ‰è¯´æ˜

### MacOS å¼€æœºå¯åŠ¨è¯¦ç»†

å°† Aria2.sh æ”¾åœ¨ä½ å–œæ¬¢çš„åœ°æ–¹ğŸ˜†

ä¿®æ”¹ plist ä¸­ shell çš„è·¯å¾„

å°† local.Aria2.plist æ”¾åœ¨ ~/Library/LaunchAgents/ ä¸‹

æ‰“å¼€ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ·»åŠ å¯åŠ¨è®¡åˆ’

```
launchctl load ~/Library/LaunchAgents/local.Aria2.plist
```

æ·»åŠ å®Œåä»»åŠ¡ä¾¿ç«‹åˆ»å¼€å§‹

å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ˜¯å¦æ·»åŠ æˆåŠŸ

```
launchctl list | grep Aria2
```

å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›å…¥ tmux æŸ¥çœ‹ aria2 çš„è¿è¡ŒçŠ¶æ€/æ—¥å¿—

```
tmux a -t Aria2
```

è¦é€€å‡º tmux è¯·æŒ‰ä¸‹ Ctrl+b åè¾“å…¥ d

è‹¥è¦é‡å¯ rpcï¼Œ

è¿›å…¥ tmuxï¼ŒæŒ‰ä¸‹ Ctrl+c ç»ˆæ­¢ä»»åŠ¡

å¼€å¯ aria-rpc ä½¿ç”¨
```
launchctl start local.Aria2
```
æˆ–
```
tmux -d -s Aria2 '/path/to/shell/Aria2.sh'
```

~~**æ³¨ï¼š**ä½ å¯èƒ½ä¼šå‘ç° plist ä¸­ ProgramArgument éƒ¨åˆ†æœ‰ä¸€ä¸ªå¥‡æ€ªçš„åœ°æ–¹ `&& w`~~

~~æ²¡é”™ä»–æ˜¯å¤šä½™çš„æ— ç”¨çš„ï¼Œä½†æ²¡æœ‰ä»–è¿™ä¸ª launchd é¡¹ç›®å°±ä¼šå¯åŠ¨å¤±è´¥~~

~~æˆ‘åœ¨ stackoverflow ä¸Šå¯¹é—®é¢˜ä½œäº†è¯¦ç»†çš„æè¿°-->[é“¾æ¥](http://stackoverflow.com/questions/37990530/use-launch-daemon-spawn-a-screen-session-run-aria2-rpc)~~

æ¢æˆ tmux ä»¥åä¼¼ä¹å°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜äº†ã€‚

ç„¶åé“¾æ¥é‡Œé‚£ä¸ªé—®é¢˜ç”±äºé•¿æœŸæ— äººå›ç­”ï¼Œè¢« stackoverflow åˆ é™¤äº†ã€‚ã€‚ã€‚

----

å¦‚æœè¦åˆ é™¤å¼€æœºå¯åŠ¨ è¯·æŠŠæœ€å¼€å§‹çš„å‘½ä»¤ä¸­çš„ load æ”¹æˆ unload

~~PS: shell ä¸­ aria2 ä½¿ç”¨äº†ç»å¯¹è·¯å¾„ï¼Œè¿™æ˜¯ brew å®‰è£…çš„ aria2 æ‰€åœ¨è·¯å¾„ï¼Œä¹‹æ‰€ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„æ˜¯å› ä¸ºå¦‚æœä¸è¿™æ ·åšä¼šæœ‰ bug(bug ä¼¼ä¹ä»…é™äº shï¼Œbash åº”è¯¥å°±æ²¡äº‹)~~

å…¶ä»–ç³»ç»Ÿçš„è¯å¯ä»¥æŠŠ tmux å’Œ aria2 å‘½ä»¤å†™åœ¨åŒä¸€è¡Œé‡Œæ·»åŠ åˆ° rc.local

å¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­

```
su - username -c 'tmux new -d -s Aria2 aria2c --enable-rpc=true --input-file=/home/username/.aria2/aria2.session --conf-path=/home/username/.aria2/aria2.conf'
```

åµŒå¥—å¤ªå¤šå¯èƒ½ä¼šå¤±è´¥ï¼Œæ‰€ä»¥å»ºè®®æ‹†æˆ shell åæ·»åŠ åˆ° rc.local

*å®Œ*
